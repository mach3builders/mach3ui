@reference "./ui.css";

.rich-text-editor {
    @apply flex flex-col rounded-md border;
    @apply border-gray-140 bg-white;
    @apply dark:border-gray-700 dark:bg-gray-800;
}

.rich-text-editor-toolbar {
    @apply flex flex-wrap items-center gap-1 border-b p-1.5;
    @apply border-gray-140;
    @apply dark:border-gray-700;
}

.rich-text-editor-toolbar-group {
    @apply flex items-center gap-0.5;
}

.rich-text-editor-toolbar-separator {
    @apply mx-1 h-6 w-px;
    @apply bg-gray-200;
    @apply dark:bg-gray-700;
}

.rich-text-editor-toolbar-btn {
    @apply inline-flex h-8 w-8 items-center justify-center rounded-md;
    @apply text-gray-600 hover:bg-gray-100 hover:text-gray-900;
    @apply dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white;

    &.is-active {
        @apply bg-gray-100 text-gray-900;
        @apply dark:bg-gray-700 dark:text-white;
    }

    &:disabled {
        @apply cursor-not-allowed opacity-50;
    }

    svg {
        @apply h-4 w-4;
    }
}

.rich-text-editor-toolbar-popover {
    @apply relative;
    anchor-scope: --rich-text-editor-popover-trigger;

    > [popovertarget] {
        anchor-name: --rich-text-editor-popover-trigger;
    }
}

.rich-text-editor-popover {
    @apply m-0 w-72 rounded-lg border p-3 shadow-lg;
    @apply border-gray-100 bg-white;
    @apply dark:border-gray-740 dark:bg-gray-790;
    position-anchor: --rich-text-editor-popover-trigger;
    top: calc(anchor(bottom) + 0.25rem);
    left: anchor(left);

    &:popover-open {
        @apply flex flex-col gap-3;
    }
}

.rich-text-editor-popover-title {
    @apply text-sm font-medium;
    @apply text-gray-900;
    @apply dark:text-gray-100;
}

.rich-text-editor-popover-input {
    @apply block h-9 w-full rounded-md border px-3 text-sm;
    @apply border-gray-200 bg-white text-gray-900 placeholder-gray-400;
    @apply dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-500;

    &:focus {
        @apply border-gray-400 outline-none;
        @apply dark:border-gray-500;
    }
}

.rich-text-editor-popover-actions {
    @apply flex items-center justify-end gap-2;
}

.rich-text-editor-content {
    @apply max-h-96 min-h-48 overflow-y-auto p-4;

    &:focus-within {
        @apply outline-none;
    }
}

.rich-text-editor-content .tiptap {
    @apply max-w-none text-sm leading-relaxed outline-none;
    @apply text-gray-700;
    @apply dark:text-gray-300;

    > * + * {
        @apply mt-3;
    }

    h1 {
        @apply text-2xl font-bold;
        @apply text-gray-900;
        @apply dark:text-gray-100;
    }

    h2 {
        @apply text-xl font-semibold;
        @apply text-gray-900;
        @apply dark:text-gray-100;
    }

    h3 {
        @apply text-lg leading-snug font-semibold;
        @apply text-gray-900;
        @apply dark:text-gray-100;
    }

    p {
        @apply leading-relaxed;
    }

    strong {
        @apply font-semibold;
        @apply text-gray-900;
        @apply dark:text-gray-100;
    }

    em {
        @apply italic;
    }

    s {
        @apply line-through;
    }

    a {
        @apply font-medium no-underline hover:underline;
        @apply text-blue-600;
        @apply dark:text-blue-400;
    }

    ul {
        @apply list-disc pl-5;
    }

    ol {
        @apply list-decimal pl-5;
    }

    li {
        @apply my-1;
    }

    blockquote {
        @apply border-l-4 pl-4 italic;
        @apply border-gray-300 text-gray-600;
        @apply dark:border-gray-600 dark:text-gray-400;
    }

    code {
        @apply rounded px-1.5 py-0.5 font-mono text-xs;
        @apply bg-gray-100 text-gray-800;
        @apply dark:bg-gray-700 dark:text-gray-200;
    }

    pre {
        @apply overflow-x-auto rounded-md p-4 font-mono text-xs;
        @apply bg-gray-900 text-gray-100;
        @apply dark:bg-gray-950;

        code {
            @apply bg-transparent p-0;
            @apply text-inherit;
        }
    }

    hr {
        @apply my-6 border-t;
        @apply border-gray-200;
        @apply dark:border-gray-700;
    }

    img {
        @apply max-w-full rounded-md;
    }
}

.rich-text-editor-content .tiptap p.is-editor-empty:first-child::before {
    @apply pointer-events-none float-left h-0;
    @apply text-gray-400;
    @apply dark:text-gray-500;
    content: attr(data-placeholder);
}

.rich-text-editor-content .tiptap:focus {
    @apply outline-none;
}

.rich-text-editor-footer {
    @apply flex items-center justify-between border-t px-3 py-2;
    @apply border-gray-140;
    @apply dark:border-gray-700;
}

.rich-text-editor-character-count {
    @apply text-xs;
    @apply text-gray-500;
    @apply dark:text-gray-400;
}

.rich-text-editor-inset,
.card-body .rich-text-editor {
    @apply bg-gray-30 border-gray-100;
    @apply dark:border-gray-710 dark:bg-gray-820;

    .rich-text-editor-toolbar,
    .rich-text-editor-footer {
        @apply border-gray-100;
        @apply dark:border-gray-710;
    }
}
